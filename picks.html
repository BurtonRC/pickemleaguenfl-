<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="picksTable.css">
  <link rel="stylesheet" type="text/css" href="index.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

  <title>JW's Pick'em League</title>
</head>
<body>
  
  <section class="sports-news-container">
    <header class="top-bar">
        <div class="container">
          <div class="top-bar-content">
            <a href="index.html"><img src="./img/pickem_logo.png" alt="JW's Pick'em League Logo" class="logo" /></a>
          
              <nav class="nav-links">
                <a href="picks.html" class="nav-link">This Week's Picks</a>
                <a href="leaderboard.html" class="nav-link">PL Leaderboard</a>
                <a href="survivor.html" class="nav-link">Survivor Series</a>
                <a href="weeklyreports.html" class="nav-link">The Weekly Reports</a>
              </nav>

            <!-- Hamburger Icon -->
            <div class="hamburger-menu">
              <div class="hamburger-icon" onclick="toggleMenu()">☰</div>

                <!-- Hidden Menu -->
                <div id="menu-content" class="menu-content">
                    <!-- Close button (X) inside the menu -->
                    <div class="close-icon" onclick="toggleMenu()">✖</div>

                    <a href="index.html"><img src="./img/pickem_logo.png" alt="JW's Pick'em League logo" class="logo-hamburger" /></a>

                    <!-- Navigation links inside the mobile menu -->
                    <nav class="mobile-nav-links">
                      <a href="index.html">Home</a>
                      <a href="picks.html">This Week's Picks</a>
                      <a href="leaderboard.html">PL Leaderboard</a>
                      <a href="survivor.html">Survivor Series</a>
                      <a href="weeklyreports.html">The Weekly Reports</a>
                    </nav>
                </div>
            </div>
        </div>
      </div>
    </header>
  
<div class="picksHero">
    <div class="glimage"></div>
</div>
  
    
      <div class="hdr-main">
        <p style="font-size: 1em; font-weight: bold; color: #b1945a; margin: 5px 0;">Week 06</p>
        <h1 class="guide">Quick Guide Weekly Selections</h1>
      </div>

      <div class="box" style="border-top: 10px solid #b1945a;">
        <br>
        <p>Scheduled games by week are listed below, input your choices for each new week:</p>
        <ol>
            <li><strong>NAME</strong><br>
                 Please enter First and Last names, correctly spelled please. 
            </li>
            <li><strong>DRIVE-BYS</strong><br>
                 Click toggle buttons (minimum one db per week).</li>
            <li><strong>DISRUPTOR PS & GAME WINNERS</strong><br>
                 Click the drop downs and select wisely.
            </li>
            <!--<li><strong>SURVIVOR</strong> Still hanging in there?<br>
                 Click the last drop down on the table.
            </li>-->
        </ol>
        
        <p><strong>GROUP EMAIL</strong><br>Once you submit your picks an email confirmation is sent to the group listing your selections and comments/tom-foolery.</p>
        <br>
      </div>
    
     <br>   

   <div class="box">
    <div class="weekTable">    
      <form id="myForm" method="post" action="https://script.google.com/macros/s/AKfycbyvxL8v9QcGPTv164qiJFrwWqRLgvHkiZ1wNIRU1R_H7gND6fBJUinTD6Yx0SlTcIA/exec">
            <div>
            <table>
                <tbody>
                  <tr>
                      <td>
                        <label for="firstName">First Name:</label>
                        <input type="text" id="firstName" name="firstName" required>
                      </td>
                      <td>
                        <label for="lastName">Last Name:</label>
                        <input type="text" id="lastName" name="lastName" required>
                      </td>
                  </tr>
                </tbody>    
              </table>
            </div>
            
            <div>
              <table>                 
                    <thead>
                        <tr>
                        <th scope="col">Week 06</th>
                        <th scope="col">Day</th>
                        <th scope="col">DB</th>
                        <th scope="col">PS</th>
                        <th scope="col">Select</th>
                        </tr>
                    </thead>
                        <tbody>

                          <tr>
                            <td>San Fran 49ers @ Seattle Seahawks</td>
                            <td>Thur</td>
                            <td></td>
                            <td></td>
                            <td>
                                <select data-cookie-id="game1" name="Games_1">
                                    <option value="">--Select Team--</option>
                                    <option value="San Fran">San Francisco 49ers</option>
                                    <option value="Seattle">Seattle Seahawks</option>
                                </select>
                            </td>
                          </tr>

                          <tr>
                            <td>Jacksonville Jags @ Chicago Bears</td>
                            <td>Sun</td>
                            <td></td>
                            <td></td>
                            <td>
                                <select data-cookie-id="game2" name="Games_2">
                                    <option value="">--Select Team--</option>
                                    <option value="Jacksonville">Jacksonville Jaguars</option>
                                    <option value="Chicago">Chicago Bears</option>
                                </select>
                            </td>  
                          </tr>

                          <tr>
                            <td style="line-height: 1.5;"><strong>Wash Commanders(db)</strong> @ Baltimore Ravens
                            <br> <strong>Disruptor (PS) GOTWk (Wash +6.5)</strong> 
                          </td>
                            <td>Sun</td>
                            <td>
                              <span>WaC(db)</span>  <br><br>
                              <div class="slide-box">
                                <label class="switch">
                                <!-- Make sure to change and align DriveBy no. so it enters in the right game section -->
                                <input type="checkbox" id="toggle-wac" name="DriveBy_3" value="WaC(db)" data-cookie-id="toggle-wac"/><div></div></label>
                              </div>
                            </td>                           
                            <td>
                                <label for="WashPs">WashC +6.5
                                <!-- Make sure to change and align pointSpread no. so it enters in the right game section -->
                                <select id="WashPs" data-cookie-id="pointspread3" name="PointSpread_3">
                                    <option value="">--Select Cover--</option>
                                    <option value="Wash Covers">Wash covers +6.5</option>
                                    <option value="Balt Covers">Balt covers -6.5</option>
                                </select>
                                </label>
                            </td>
                            <td>
                                <select id="dropdown-wac" data-cookie-id="game3" name="Games_3">
                                    <option value="">--Select Team--</option>
                                    <option value="WaC(db)">Wash Commanders</option>
                                    <option value="Baltimore">Baltimore Ravens</option>
                                </select>
                            </td>
                          </tr>

                          <tr>
                            <td><strong>Arizona Cardinals(db)</strong> @ Green Bay Packers</td>
                            <td>Sun</td>
                            <td>
                              <span>AzC(db)</span>  <br><br>
                              <div class="slide-box">
                                <label class="switch">
                                <input type="checkbox" id="toggle-azc" name="DriveBy_4" value="Azc(db)" data-cookie-id="toggle-azc"/><div></div></label>
                              </div>
                            </td>                           
                            <td></td>
                            <td>
                                <select id="dropdown-azc" data-cookie-id="game4" name="Games_4">
                                    <option value="">--Select Team--</option>
                                    <option value="AzC(db)">Arizona Cardinals</option>
                                    <option value="Green Bay">Green Bay Packers</option>
                                </select>
                            </td>
                          </tr>

                          <tr>
                            <td>Houston Texans @ <strong>NE Patriots(db)</strong></td>
                            <td>Sun</td>
                            <td>
                              <span>NEP(db)</span>  <br><br>
                              <div class="slide-box">
                                <label class="switch">
                                <input type="checkbox" id="toggle-nep" name="DriveBy_5" value="NEP(db)" data-cookie-id="toggle-nep"/><div></div></label>
                              </div>
                            </td>                            
                            <td></td>
                            <td>
                                <select id="dropdown-nep" data-cookie-id="game5" name="Games_5">
                                    <option value="">--Select Team--</option>
                                    <option value="Houston">Houston Texans</option>
                                    <option value="NEP(db)">New England Patriots</option>
                                </select>
                            </td>
                          </tr>

                          <tr>
                            <td>Tampa Bay Bucs @ New Orleans Saints</td>
                            <td>Sun</td>                              
                            <td></td>
                            <td></td>
                            <td>
                                <select data-cookie-id="game6" name="Games_6">
                                    <option value="">--Select Team--</option>
                                    <option value="Tampa Bay">Tampa Bay Buccaneers</option>
                                    <option value="New Orleans">New Orleans Saints</option>
                                </select>
                            </td>
                          </tr>

                          <tr>
                            <td><strong>Cleveland Browns(db)</strong> @ Philadelphia Eagles</td>
                            <td>Sun</td>                            
                            <td>
                              <span>CvB(db)</span>  <br><br>
                              <div class="slide-box">
                                <label class="switch">
                                <input type="checkbox" id="toggle-cvb" name="DriveBy_7" value="CvB(db)" data-cookie-id="toggle-cvb"/><div></div></label>
                              </div>
                            </td>
                            <td></td>
                            <td>
                                <select id="dropdown-cvb" data-cookie-id="game7" name="Games_7">
                                    <option value="">--Select Team--</option>
                                    <option value="CvB(db)">Cleveland Browns</option>
                                    <option value="Philadelphia">Philadelphia Eagles</option>
                                </select>
                            </td>
                          </tr>

                          <tr>
                            <td>Indianapolis Colts @ Tennessee Titans</td>
                            <td>Sun</td>    
                            <td></td>
                            <td></td>
                            <td>
                                <select data-cookie-id="game8" name="Games_8">
                                    <option value="">--Select Team--</option>
                                    <option value="Indianapolis">Indianapolis Colts</option>
                                    <option value="Tennessee">Tennessee Titans</option>
                                </select>
                            </td>
                          </tr>

                          <tr>
                            <td>Los Angeles Chargers @ Denver Broncos</td>
                            <td>Sun</td>                            
                            <td></td>
                            <td></td>
                            <td>
                                <select data-cookie-id="game9" name="Games_9">
                                    <option value="">--Select Team--</option>
                                    <option value="LA Chargers">Los Angeles Chargers</option>
                                    <option value="Denver">Denver Broncos</option>
                                </select>
                            </td>
                          </tr>

                          <tr>
                            <td>Pittsburgh Steelers @ Las Vegas Raiders</td>
                            <td>Sun</td>                            
                            <td></td>
                            <td></td>
                            <td>
                                <select name="Games_10" data-cookie-id="game10">
                                    <option value="">--Select Team--</option>
                                    <option value="Pittsburgh">Pittsburgh Steelers</option>
                                    <option value="Las Vegas">Las Vegas Raiders</option>
                                </select>
                            </td>
                          </tr>

                          <tr>
                            <td>Atlanta Falcons @ <strong>Carolina Panthers(db)</strong> </td>
                            <td>Sun</td>
                            <td>
                              <span>CaP(db)</span>  <br><br>
                              <div class="slide-box">
                                <label class="switch">
                                <input type="checkbox" id="toggle-cap" name="DriveBy_11" value="CaP(db)" data-cookie-id="toggle-cap"/><div></div></label>
                              </div>
                            </td>
                            <td></td>
                            <td>
                                <select id="dropdown-cap" data-cookie-id="game11" name="Games_11">
                                    <option value="">--Select Team--</option>
                                    <option value="Atlanta">Atlanta Falcons</option>
                                    <option value="CaP(db)">Carolina Panthers</option>
                                </select>
                            </td>
                          </tr>

                          <tr>
                            <td>Detroit Lions @ Dallas Cowboys</td>
                            <td>Sun</td>                                                        
                            <!--<td>
                              <span>NYG(db)</span>  <br><br>
                              <div class="slide-box">
                                <label class="switch">
                                <input type="checkbox" id="toggle-nyg" name="DriveBy_12" value="NYG(db)" data-cookie-id="toggle-nyg" />    <div></div></label>
                              </div>
                            </td>-->                            
                            <td></td>
                            <td></td>
                            <td>
                                <select id="dropdown-nyg" name="Games_12" data-cookie-id="game12">
                                    <option value="">--Select Team--</option>
                                    <option value="Detroit">Detroit Lions</option>
                                    <option value="Dallas">Dallas Cowboys</option>
                                </select>
                            </td>
                          </tr>

                          <tr>
                            <td>Cincinnati Bengals @ New York Giants</td>
                            <td>Sun</td>                           
                            <td></td>
                            <td></td>
                            <td>
                                <select data-cookie-id="game13" name="Games_13">
                                    <option value="">--Select Team--</option>
                                    <option value="Cincinnati">Cincinnati Bengals</option>
                                    <option value="NY Giants">New York Giants</option>
                                </select>
                            </td>
                          </tr>

                          <tr>
                            <td>Buffalo Bills @ New York Jets</td>
                            <td>Mon</td>
                            <td></td>                            
                            <td></td>
                            <td>
                                <select data-cookie-id="game14" name="Games_14">
                                    <option value="">--Select Team--</option>
                                    <option value="Buffalo">Buffalo Bills</option>
                                    <option value="NY Jets">New York Jets</option>
                                </select>
                            </td>
                          </tr>

                          <!--<tr>
                            <td>Tennessee Titans @ Miami Dolphins</td>
                            <td>Mon</td>
                            <td></td>                           
                            <td></td>
                            <td>
                                <select data-cookie-id="game15" name="Games_15">
                                    <option value="">--Select Team--</option>
                                    <option value="Tennessee">Tennessee Titans</option>
                                    <option value="Miami">Miami Dolphins</option>
                                </select>
                            </td>
                          </tr> -->

                          <!--<tr>
                            <td>Seattle Seahawks @ Detroit Lions</td>
                            <td>Mon</td>
                            <td></td>                            
                            <td></td>
                            <td>
                                <select data-cookie-id="game16" name="Games_16">
                                    <option value="">--Select Team--</option>
                                    <option value="Seattle">Seattle Seahawks</option>
                                    <option value="Detroit">Detroit Lions</option>
                                </select>
                            </td>
                          </tr>-->

                          <tr style="display: none;">
                            <td>Survivor Selection:</td>
                            <td colspan="2"></td>
                            <td>Allan & Mikaila 😎</td>
                            <td colspan="1">
                                <select id="survivor" name="Survivor">
                                    <option value="">--Select Team--</option>
                                    <option value="Arizona">Arizona Cardinals</option>
                                    <option value="Atlanta">Atlanta Falcons</option>
                                    <option value="Baltimore">Baltimore Ravens</option>
                                    <option value="Buffalo">Buffalo Bills</option>
                                    <option value="Carolina">Carolina Panthers</option>
                                    <option value="Chicago">Chicago Bears</option>
                                    <option value="Cincinnati">Cincinnati Bengals</option>
                                    <option value="Cleveland">Cleveland Browns</option>
                                    <option value="Dallas">Dallas Cowboys</option>
                                    <option value="Denver">Denver Broncos</option>
                                    <option value="Detroit">Detroit Lions</option>
                                    <option value="Green Bay">Green Bay Packers</option>
                                    <option value="Houston">Houston Texans</option>
                                    <option value="Indianapolis">Indianapolis Colts</option>
                                    <option value="Jacksonville">Jacksonville Jaguars</option>
                                    <option value="KansasCity">Kansas City Chiefs</option>
                                    <option value="Las Vegas">Las Vegas Raiders</option>
                                    <option value="LA Chargers">Los Angeles Chargers</option>
                                    <option value="LA Rams">Los Angeles Rams</option>
                                    <option value="Miami">Miami Dolphins</option>
                                    <option value="Minnesota">Minnesota Vikings</option>
                                    <option value="New England">New England Patriots</option>
                                    <option value="New Orleans">New Orleans Saints</option>
                                    <option value="NY Giants">New York Giants</option>
                                    <option value="NY Jets">New York Jets</option>
                                    <option value="Philadelphia">Philadelphia Eagles</option>
                                    <option value="Pittsburgh">Pittsburgh Steelers</option>
                                    <option value="San Francisco">San Francisco 49ers</option>
                                    <option value="Seattle">Seattle Seahawks</option>
                                    <option value="Tampa Bay">Tampa Bay Buccaneers</option>
                                    <option value="Tennessee">Tennessee Titans</option>
                                    <option value="Washington">Washington Commanders</option>
                                </select>                            
                          </tr>

                          <tr>
                              <td><label for="comments">Insight and Tom-Foolery:</label></td>
                              <td colspan="4">
                                  <textarea id="comments" name="comments" rows="5" cols="90" placeholder="And begin..."></textarea>
                              </td>
                              
                          </tr>

                          <tr>
                              <td colspan="2"></td>
                              <td>
                                  <input class="submitButton" type="submit" value="submit" />
                              </td>
                              <td colspan="2"></td>
                          </tr>

                        </tbody>                    
              </table>
            </div>
        </form>
    </div>
  </div>
  <br>
<section class="news-grid">
      <div class="container">
      <div class="news-row">
        <article class="news-item">
          <div class="news-content">
            <img src="./img/news16.jpg" alt="Saints QB Derek Carr expected to miss multiple weeks" class="news-image" />
            <div class="news-tag">News</div>
            <time datetime="2024-10-08" class="feature-date">Oct 8, 2024</time>
            <h3 class="news-title">Saints QB Derek Carr expected to miss multiple weeks</h3>
            <p class="news-summary">New Orleans Saints quarterback Derek Carr exited his team's Monday night's loss to the Kansas City Chiefs early and he's unlikely to return anytime soon. Carr is expected to miss multiple weeks due to an oblique injury he suffered is the defeat.</p>
          </div>
        </article>
        <article class="news-item">
          <div class="news-content">
            <img src="./img/news17.jpg" alt="New York Jets' fires Robert Saleh" class="news-image" />
            <div class="news-tag">News</div>
            <time datetime="2024-10-08" class="feature-date">Oct 8, 2024</time>
            <h3 class="news-title">New York Jets' fires Robert Saleh mid season</h3>
            <p class="news-summary">Robert Saleh's firing on Tuesday morning, just five games into the New York Jets' 2024 season, stunned the NFL. But this was not as much of a hair-trigger decision as it might have appeared. There were already significant concerns about Saleh's abilities as a head coach among some inside the Jets building at the end of the 2023 season.</p>
          </div>
        </article>
        <article class="news-item">
          <div class="news-content">
            <img src="./img/news18.jpg" alt="Texans wide receiver Nico Collins week to week after injuring hamstring" class="news-image" />
            <div class="news-tag">News</div>
            <time datetime="2024-10-07" class="feature-date">Oct 7, 2024</time>
            <h3 class="news-title">Texans WR Nico Collins wk to wk after injuring hamstring vs. Bills</h3>
            <p class="news-summary">Head coach DeMeco Ryans told reporters on Monday that Collins is considered week to week after suffering a hamstring injury in the Texans' win over the Buffalo Bills on Sunday.
              <br><br>
              "He's in good spirits," Ryans said. "It takes a couple of weeks for a hamstring. So, we'll evaluate him on a week-to-week basis."</p>
          </div>
        </article>
      </div>
      </div>
    </section> 
  
    <footer class="footer">
      <div class="footer-container">
        <nav class="footer-nav">
          <a href="index.html"><img src="./img/pickem_logo.png" alt="Footer logo" class="footer-logo" /></a>
          <a href="picks.html" class="footer-link">This Week's Picks</a>
          <a href="leaderboard.html" class="footer-link">PL Leaderboard</a>
          <a href="survivor.html" class="footer-link">Survivor Series</a>
          <a href="weeklyreports.html" class="footer-link">The Weekly Reports</a>
        </nav>
        <p class="copyright">© JW's Pick'em League 2024</p>
      </div>
    </footer>
  </section>


  <!-- Hamburger toggle -->
  
  <script>
    function toggleMenu() {
  var menuContent = document.getElementById("menu-content");
  menuContent.classList.toggle("menu-open");
  }
  </script>

<!-- Sends user inputs to Apps Script for Google Sheets -->
 
<script>
  document.getElementById('myForm').addEventListener('submit', function (event) {
    event.preventDefault();

    var form = document.getElementById('myForm');
    var formData = new FormData(form);

    var formObject = {};
    formData.forEach(function (value, key) {
      formObject[key] = value;
    });

    fetch('https://script.google.com/macros/s/AKfycbyvxL8v9QcGPTv164qiJFrwWqRLgvHkiZ1wNIRU1R_H7gND6fBJUinTD6Yx0SlTcIA/exec', {
      method: 'post',
      headers: {
        'Content-Type': 'application/x-www-form-urlencoded',
      },
      body: new URLSearchParams(formObject)
    })
    .then(response => {
      if (!response.ok) {
        throw new Error('Network response was not ok.');
      }
      return response.text();
    })
    .then(data => {
      alert('Game selections were successful. ' + data);
    })
    .catch(error => {
      console.error('Error:', error);
    });
  });
</script>

<!-- Toggle/Dropdown sync -->

<script>
  // Create a function to synchronize toggle and dropdown
  function syncToggleAndDropdown(toggleId, dropdownId, teamValue) {
    const toggleElement = document.getElementById(toggleId);
    const dropdownElement = document.getElementById(dropdownId);

    // When the toggle is changed
    toggleElement.addEventListener('change', function() {
      if (this.checked) {
        // Set dropdown value to the team when checked
        dropdownElement.value = teamValue;
      } else {
        // Reset dropdown if unchecked
        dropdownElement.value = "";
      }
    });

    // When the dropdown is changed
    dropdownElement.addEventListener('change', function() {
      if (this.value === teamValue) {
        // Check the toggle if the selected value matches the team
        toggleElement.checked = true;
      } else {
        // Uncheck the toggle if a different value is selected
        toggleElement.checked = false;
      }
    });
  }

  // Synchronize the first pair (WaC)
  // The value of the dropdown is the third element, this needs to be set or it won't display
  syncToggleAndDropdown("toggle-wac", "dropdown-wac", "WaC(db)");

  // Synchronize the second pair (AzC)
  syncToggleAndDropdown("toggle-azc", "dropdown-azc", "AzC(db)");

  // Synchronize the third pair (NEP)
  syncToggleAndDropdown("toggle-nep", "dropdown-nep", "NEP(db)");

  // Synchronize the fourth pair (CvB)
  syncToggleAndDropdown("toggle-cvb", "dropdown-cvb", "CvB(db)");

  // Synchronize the fifth pair (CaP)
  syncToggleAndDropdown("toggle-cap", "dropdown-cap", "CaP(db)");

  // Add more pairs as necessary using the same pattern
</script>



<!-- Track User Inputs with Cookies, Multiple Sessions -->

<script>
  // List of valid names
  const validNames = [
      "Adam Kenny", "Alan Silk", "Andrew Donachuk", "Brad De Ryck", 
      "Brett Steidl", "Chris Stenberg", "Colin Larsen", "Colm Bolger", 
      "Conor O'Brien", "Corey McKay", "Darren Barabash", "Daryl Krywonis", 
      "Donald Van Landeghem", "Doug Roberts", "Drew Riddolls", "Eric Matthies", 
      "Fran Fitzpatrick", "Gavin Steidl", "Ian Silk", "Jake Giesbrecht", 
      "John Harper", "John Wyndels", "Nico Vong", "Matt Wyndels", 
      "Makaila Hardy", "Nisha Krywonis", "Noel Leon", "Paul McGuire", 
      "Ray Riddolls", "Rick Halas", "Roudy Courser", "Sean Kimmel", 
      "Shaun Foley"
  ];
  
  // Helper functions for cookies
  function setCookie(name, value, days) {
      let expires = "";
      if (days) {
          const date = new Date();
          date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
          expires = "; expires=" + date.toUTCString();
      }
      document.cookie = name + "=" + encodeURIComponent(value) + expires + "; path=/";
  }
  
  function getCookie(name) {
      let cookies = document.cookie.split('; ');
      for (let cookie of cookies) {
          let [key, value] = cookie.split('=');
          if (key === name) return decodeURIComponent(value);
      }
      return null;
  }
  
  // Function to validate the name (case-insensitive)
  function validateName(firstName, lastName) {
      const fullNameInput = (firstName.trim() + ' ' + lastName.trim()).toLowerCase();
      return validNames.some(validName => validName.toLowerCase() === fullNameInput);
}

  
  // Function to load previous selections from cookies (case-insensitive)
function loadSelections(userName) {
    const normalizedUserName = userName.toLowerCase();
    const cookieData = getCookie(normalizedUserName + '_selections');
    console.log('Cookie data for', normalizedUserName, ':', cookieData); // Debugging line
    return cookieData ? JSON.parse(cookieData) : {};
}
  
  // Function to apply the selections from cookies (case-insensitive)
function applySelections(fullName) {
    const normalizedFullName = fullName.toLowerCase();
    const previousSelections = loadSelections(normalizedFullName);
    console.log('Previous selections loaded for', normalizedFullName, ':', previousSelections);  // Debugging line
  
    // Apply selections and disable the relevant fields
    document.querySelectorAll('select[data-cookie-id], input[type="checkbox"][data-cookie-id]').forEach(input => {
        const cookieId = input.getAttribute('data-cookie-id');
        if (previousSelections[cookieId]) {
            if (input.type === 'checkbox') {
                input.checked = true;
            } else {
                input.value = previousSelections[cookieId];
            }
            input.disabled = true;  // Disable the field
            input.parentElement.style.color = "grey";  // Optional: Grey out label for disabled inputs
         }
      });
  }
  
  // Handle first and last name inputs together to trigger validation and loading
  function handleNameInput() {
      const firstName = document.getElementById('firstName').value.trim();
      const lastName = document.getElementById('lastName').value.trim();
      
      if (firstName && lastName && validateName(firstName, lastName)) {
          const fullName = firstName + ' ' + lastName;
          console.log('Valid name entered:', fullName);  // Debugging line
          applySelections(fullName);
      } else {
          console.log('Invalid name, selections not applied');  // Debugging line
      }
  }
  
  // Add event listeners for both first and last name inputs
  document.getElementById('firstName').addEventListener('input', handleNameInput);
  document.getElementById('lastName').addEventListener('input', handleNameInput);
  
  // Handle form submission (case-insensitive cookie storage)
  document.getElementById('myForm').addEventListener('submit', function(event) {
      const firstName = document.getElementById('firstName').value.trim();
      const lastName = document.getElementById('lastName').value.trim();
      const fullName = firstName + ' ' + lastName;
      const normalizedFullName = fullName.toLowerCase();  // Normalize name to lowercase
  
      // **Addition for name validation on submission**
      if (!validateName(firstName, lastName)) {
          // Display system-like error message if name is invalid
          const firstNameInput = document.getElementById('firstName');  // Referencing the input element
          firstNameInput.setCustomValidity("Invalid name. Please enter a valid name from the list.");
          firstNameInput.reportValidity();  // Triggers the error message
          event.preventDefault();  // Prevent form submission
          return;
      }
  
      // Clear any custom error if name is valid
      document.getElementById('firstName').setCustomValidity("");
  
      // Collect selections to save to cookies
      const selections = {};
      document.querySelectorAll('select[data-cookie-id], input[type="checkbox"][data-cookie-id]').forEach(input => {
          const cookieId = input.getAttribute('data-cookie-id');
          if (input.type === 'checkbox') {
              if (input.checked) {
                  selections[cookieId] = input.value;
              }
          } else {
              if (input.value !== '') {
                  selections[cookieId] = input.value;
              }
          }
      });
  
      // Save the selections in cookies using the normalized name
      setCookie(normalizedFullName + '_selections', JSON.stringify(selections), 7);
      console.log('Selections saved for', normalizedFullName, ':', selections);
      
      // Allow form to submit
  });
  
  // Automatically check for cookie deletion on page load
  function checkCookieDeletion() {
      const today = new Date();
      const dayOfWeek = today.getDay(); // 0 = Sunday, 1 = Monday, ..., 6 = Saturday
      const hours = today.getHours(); // Get current hours (0 - 23)
  
      // Check if today is Tuesday (2) and it's after 8 AM (8)
      if (dayOfWeek === 2 && hours >= 8) {
          deleteAllCookies(); // Delete all cookies if within the range
      }
  }
  
  // Function to delete all cookies for valid names
  function deleteAllCookies() {
      for (const name of validNames) {
          const cookieName = name + '_selections';
          document.cookie = cookieName + '=; Max-Age=-99999999; path=/';  
      }
      console.log('All cookies for valid names have been deleted.');
  }
  
  // Call checkCookieDeletion on page load
  window.onload = checkCookieDeletion;
  
  </script>


<!-- Clears form after submit--> 

<script>
  document.getElementById('myForm').addEventListener('submit', function() {
    setTimeout(() => {
      this.reset(); // Reset the form after submission
    }, 500); // Adjust the delay as needed
  });
</script>

</body>
</html>